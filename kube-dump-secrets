#!/usr/bin/env python3

import subprocess
import json
import base64

def get_secrets():
    result = subprocess.run(['kubectl', 'get', 'secrets', '-o', 'json'], capture_output=True, text=True)
    secrets = json.loads(result.stdout)
    for secret in secrets['items']:
        secret_name = secret['metadata']['name']
        print(f"Secret: {secret_name}")
        print("-" * (len(secret_name) + 8))
        for key, value in secret['data'].items():
            decoded_value = base64.b64decode(value).decode('utf-8')
            print(f"{key}: '{decoded_value}'")
        print("\n")

if __name__ == "__main__":
    get_secrets()
